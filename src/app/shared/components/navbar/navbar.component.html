<!-- <nav class="navbar">
 
  <div class="navbar-left">
    <img src="../../../../assets/logo-ecommerce.png" alt="Logo" class="logo" />
  </div>

  
  <nav [@navbarFadeSlide]>
    <ul class="navbar-center">
      <li><a routerLink="/inicio" routerLinkActive="active">Inicio</a></li>
      <li><a routerLink="/nosotros" routerLinkActive="active">Nosotros</a></li>
      <li><a routerLink="/contacto" routerLinkActive="active">Contacto</a></li>
      <li *ngIf="usrAdmin"><a routerLink="/gestiones" routerLinkActive="active">Gestiones</a></li>
    </ul>
  </nav>

 
  <div class="navbar-right">
    <button *ngIf="!usuarioLogueado" (click)="openIngreso()">Login</button>
    <button *ngIf="usuarioLogueado" (click)="closeSesion()">Logout</button>
    <button (click)="openRegistro()">Registrarse</button>
    <button>Carrito</button>
  </div>
</nav> -->


<nav class="navbar navbar-expand-lg navbar-custom">
  <div class="container-fluid">
    <button class="navbar-toggler d-lg-none text-white" type="button" data-bs-toggle="offcanvas"
    
      data-bs-target="#offcanvasMenu" aria-controls="offcanvasMenu">
      <span class="navbar-toggler-icon"></span>
    </button>
    <a class="navbar-brand-query d-lg-none position-absolute top-45 start-50 translate-middle-x " href="#">
      <img (click)="this.generalService.home()" src="../../../../assets/logo-ecommerce.png" class="logo" alt="" />
    </a>
    <a class="navbar-brand d-none d-lg-block" href="#">
      <img (click)="this.generalService.home()" src="../../../../assets/logo-ecommerce.png" class="logo" alt="" />
    </a>
    <a href="#" class="d-lg-none nav-link ms-auto">
    </a>
    <div class="d-flex d-lg-none ms-auto gap-3 align-items-center">
      <i *ngIf="!usuarioLogueado" (click)="openIngreso()" class="fa-solid fa-user text-white"></i>
      <i *ngIf="usuarioLogueado"
        class="fa-solid fa-cart-shopping text-white carrito-icono carrito-con-badge"
        data-bs-toggle="offcanvas"
        data-bs-target="#offcanvasCarrito"
        aria-controls="offcanvasCarrito">
        <!-- <span class="badge">{{ cantidadProductos }}</span> -->

        <span matBadge="{{ cantidadProductos$ | async }}" matBadgeColor="warn">
          <mat-icon>shopping_cart</mat-icon>
        </span>
      </i>
      <i *ngIf="usuarioLogueado" (click)="closeSesion()" class="fa-solid fa-right-from-bracket text-white"></i> 
    </div>
    
    <div class="d-none d-lg-flex mx-auto w-50">
      <div class="input-group custom-input-group">
        <input class="form-control custom-search-input" type="search" placeholder="Qué estás buscando?"
          [(ngModel)]="searchTerm" (input)="autocompletar()" #inputBox aria-label="Buscar"
          aria-describedby="search-addon">
        <span class="input-group-text custom-search-icon" id="search-addon">
          <i (click)="busquedaPedido(searchTerm)" class="fas fa-search"></i>
        </span>
      </div>
      <ul *ngIf="resultados.length > 0" class="dropdown list-unstyled p-0 m-0">
        <li style="border-bottom: 1px solid rgba(221, 221, 221, 0.5);" *ngFor="let item of resultados"
          (click)="seleccionar(item)" class="d-flex align-items-center">
          <div class="result-item d-flex align-items-center w-100 p-2">
            <img [src]="item.imagen" alt="{{ item.nombre }}" class="product-image img-fluid" />
            <div class="ms-2 d-flex flex-column">
              <span>{{ item.nombre }}</span>
              <span>$ {{ item.precio }}</span>
            </div>
          </div>
        </li>
      </ul>
    </div>
    <div class="d-none d-lg-flex gap-3 nav-item">
      <div class="ms-4 d-flex gap-4">
         <i *ngIf="!usuarioLogueado" (click)="openIngreso()"  class="fa-solid fa-user"></i>
        <i 
        *ngIf="usuarioLogueado"
        class="fa-solid fa-cart-shopping carrito-icono carrito-con-badge"
        data-bs-toggle="offcanvas"
        data-bs-target="#offcanvasCarrito"
        aria-controls="offcanvasCarrito">
        <span matBadge="{{ cantidadProductos$ | async }}" matBadgeColor="warn">
          <mat-icon>shopping_cart</mat-icon>
        </span>
       <!-- <span class="badge">{{ cantidadProductos }}</span> -->
     </i>
        <i *ngIf="usuarioLogueado" (click)="closeSesion()" class="fa-solid fa-right-from-bracket"></i> 
      </div>
    </div>
  </div>
</nav>
<div class="second-row text-white py-2">
  <div class="container">
    <div class="row">
      <div class="col-12 d-lg-none text-center dropdown-container">
        <div class="d-flex">
          <div class="input-group custom-input-group">
            <input class="form-control custom-search-input" type="search" placeholder="Qué estás buscando?"
              [(ngModel)]="searchTerm" (input)="autocompletar()" #inputBox aria-label="Buscar"
              aria-describedby="search-addon">
            <span class="input-group-text custom-search-icon" id="search-addon">
              <i (click)="busquedaPedido(searchTerm)" class="fas fa-search"></i>
            </span>
          </div>
        </div>
        <ul *ngIf="resultados.length > 0" class=" list-unstyled p-0 m-0 dropdown-list">
          <li style="border-bottom: 1px solid rgba(221, 221, 221, 0.5)" *ngFor="let item of resultados"
            (click)="seleccionar(item)" class="d-flex align-items-center">
            <div class="result-item d-flex align-items-center w-100 p-2">
              <img [src]="item.imagen" alt="{{ item.nombre }}" class="product-image img-fluid" />
              <div class="ms-2 d-flex flex-column">
                <span>{{ item.nombre }}</span>
                <span>$ {{ item.precio }}</span>
              </div>
            </div>
          </li>
        </ul>
      </div>
      
      <div class="col-12 d-none d-lg-flex justify-content-center style-menues">
        <a routerLink="/inicio" data-bs-toggle="collapse" data-bs-target="#menuInicio" aria-expanded="false"
          aria-controls="menuInicio">Inicio</a>
        <a routerLink="/nosotros" data-bs-toggle="collapse" data-bs-target="#menuServicios" aria-expanded="false"
          aria-controls="menuServicios">Nosotros </a>
        <a routerLink="/contacto" data-bs-toggle="collapse" data-bs-target="#menuContacto" aria-expanded="false"
          aria-controls="menuContacto">Contacto</a>
        <a *ngIf="usrAdmin" routerLink="/gestiones" data-bs-toggle="collapse" data-bs-target="#menuContacto" aria-expanded="false"
          aria-controls="menuContacto">Gestiones</a>
      </div>
    </div>
  </div>
</div>
<div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvasMenu">
  <div class="offcanvas-header">
    <h5 class="offcanvas-title">Menú</h5>
    <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
  </div>
  <div class="offcanvas-body">
    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="nav-link" href="#" data-bs-toggle="collapse" data-bs-target="#offcanvasMenuInicio"
          aria-expanded="false" aria-controls="offcanvasMenuInicio">
          Inicio
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#" data-bs-toggle="collapse" data-bs-target="#offcanvasMenuServicios"
          aria-expanded="false" aria-controls="offcanvasMenuServicios">
          Servicios
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#" data-bs-toggle="collapse" data-bs-target="#offcanvasMenuContacto"
          aria-expanded="false" aria-controls="offcanvasMenuContacto">
          Contacto
        </a>
      </li>
      <li class="nav-item">
        <a *ngIf="usrAdmin" class="nav-link" href="#" data-bs-toggle="collapse" data-bs-target="#offcanvasMenuContacto"
          aria-expanded="false" aria-controls="offcanvasMenuContacto">
          Gestiones
        </a>
      </li>
    </ul>
  </div>
</div>


<div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasCarrito" aria-labelledby="offcanvasCarritoLabel">
  <div class="offcanvas-header">
    <h5 id="offcanvasCarritoLabel">Mi Carrito</h5>
    <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Cerrar"></button>
  </div>
  <div class="offcanvas-body">
      <app-carrito></app-carrito>  
  </div>
</div>